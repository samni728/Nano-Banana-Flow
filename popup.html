<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nano Banana Flow</title>
  <link rel="stylesheet" href="popup.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>

<body>
  <div class="background-layer"></div>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <!-- Theme Image (Small, Top-Right) -->
      <div class="header-banana">
        <img src="images/nano_banana_theme_bg.png" alt="Nano Banana Theme" class="header-image">
      </div>

      <div class="logo-area">
        <h1 class="title-en">
          Nano Banana Flow
        </h1>
        <h2 class="title-cn">
          大香蕉批量生图神器
          <span class="version-badge">v1.2.0</span>
        </h2>
      </div>

      <!-- Status Indicator -->
      <div id="statusIndicator" class="status-indicator">
        <span class="dot"></span>
        <span class="status-text">Ready</span>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Directory Input -->
      <div class="input-group">
        <label for="directoryInput">
          <span class="icon">📂</span> 保存目录 (默认为浏览器下载目录)
        </label>
        <input type="text" id="directoryInput" placeholder="例如: my-project/slide1" class="glass-input directory-input">
      </div>

      <!-- Prompts Input -->
      <div class="input-group prompt-group">
        <label for="promptInput">
          <div class="label-with-actions">
            <span><span class="icon">✨</span> 提示词列表 (每行一张)</span>
            <div class="import-tools">
              <button id="importTxtBtn" class="tool-btn" title="导入 TXT 文件">📄 导入</button>
              <button id="importImagesBtn" class="tool-btn" title="批量导入参考图 (支持多选)">🖼️ 识图</button>
            </div>
          </div>
        </label>
        <textarea id="promptInput" class="glass-input prompt-textarea" placeholder="在此输入提示词，一段对应一张图片…
示例：
一只可爱的小猫
一只在吃香蕉的大猩猩"></textarea>
        <div id="matchStatus" class="match-status hidden">已关联 0 张参考图</div>
        <div id="promptCount" class="prompt-count">0 条提示词已被识别，随时可以开始</div>

        <!-- Hidden Inputs -->
        <input type="file" id="txtFileInput" accept=".txt" style="display: none;">
        <input type="file" id="imageFileInput" accept="image/*" multiple style="display: none;">
      </div>

      <!-- Action Area -->
      <div class="action-area">
        <button id="actionBtn" class="btn-gold">
          <span class="btn-icon">🎨</span>
          <span class="btn-text">批量生成</span>
        </button>
        <button id="clearBtn" class="btn-secondary" title="清空提示词">
          <span class="btn-icon">🗑️</span>
          <span class="btn-text">清空</span>
        </button>
      </div>

      <!-- Progress Section (Overlay/Integrated) -->
      <div id="progressArea" class="progress-section hidden">
        <div class="progress-info">
          <span id="currentStatus">正在生成...</span>
          <span id="progressCount">0/0</span>
        </div>
        <div class="progress-bar-bg">
          <div id="progressBar" class="progress-bar-fill"></div>
        </div>
      </div>

      <!-- Error Message -->
      <div id="errorMsg" class="error-card hidden"></div>
    </main>

    <!-- Footer Area (Relative) -->
    <footer class="footer-area">
      <div class="qr-section">
        <img src="images/qr.png" alt="Join Group" class="qr-code">
        <div class="qr-info">
          <span class="qr-text-large">扫码加微会拉你进群（暗号：大香蕉）</span>
          <a href="https://gt.topgpt.us" target="_blank" class="website-link-large">官网：https://gt.topgpt.us</a>
        </div>
      </div>
    </footer>
  </div>

  <script src="popup.js"></script>
</body>

</html>